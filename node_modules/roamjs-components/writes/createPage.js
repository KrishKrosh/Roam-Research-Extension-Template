"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const createBlock_1 = require("./createBlock");
const date_1 = require("../date");
const toRoamDateUid_1 = tslib_1.__importDefault(require("../date/toRoamDateUid"));
const parseRoamDate_1 = tslib_1.__importDefault(require("../date/parseRoamDate"));
const submitActions_1 = tslib_1.__importDefault(require("./submitActions"));
const createPage = ({ title, tree = [], uid = date_1.DAILY_NOTE_PAGE_TITLE_REGEX.test(title)
    ? (0, toRoamDateUid_1.default)((0, parseRoamDate_1.default)(title))
    : window.roamAlphaAPI.util.generateUID(), }) => {
    return (0, submitActions_1.default)([
        {
            type: "createPage",
            params: { page: { title, uid } },
        },
        ...tree
            .flatMap((node, order) => (0, createBlock_1.gatherActions)({ node, parentUid: uid, order }))
            .map((params) => ({ type: "createBlock", params })),
    ]).then(() => uid);
};
exports.default = createPage;
//# sourceMappingURL=createPage.js.map